import{_ as t,p as e,q as l,Z as a}from"./framework-548e1e2a.js";const s={},n=a(`<h2 id="基础" tabindex="-1"><a class="header-anchor" href="#基础" aria-hidden="true">#</a> 基础</h2><h3 id="系统自带库" tabindex="-1"><a class="header-anchor" href="#系统自带库" aria-hidden="true">#</a> 系统自带库</h3><table><thead><tr><th style="text-align:left;">系统级自带库</th><th style="text-align:left;">功能</th></tr></thead><tbody><tr><td style="text-align:left;">master</td><td style="text-align:left;">系统控制数据库，包含所有配置信息，用户登录信息，当前系统运行情况</td></tr><tr><td style="text-align:left;">model</td><td style="text-align:left;">模板数据库，数据库时建立所有数据库的模板</td></tr><tr><td style="text-align:left;">tempdb</td><td style="text-align:left;">临时容器，保存所有的临时表，存储过程和其他程序交互的临时文件</td></tr><tr><td style="text-align:left;">msdb</td><td style="text-align:left;">主要为用户使用，记录着计划信息、事件处理信息、数据备份、警告以及异常信息</td></tr></tbody></table><h3 id="系统视图表" tabindex="-1"><a class="header-anchor" href="#系统视图表" aria-hidden="true">#</a> 系统视图表</h3><table><thead><tr><th style="text-align:left;">视图表</th><th style="text-align:left;">功能</th></tr></thead><tbody><tr><td style="text-align:left;">sysobjects</td><td style="text-align:left;">记录了数据库中所有表，常用字段为 id、name和xtype</td></tr><tr><td style="text-align:left;">syscolumns</td><td style="text-align:left;">记录了数据库中所有表的字段，常用字段为id、name 和 xtype</td></tr><tr><td style="text-align:left;"><strong>sys.databases</strong></td><td style="text-align:left;">SQL Server 中所有的数据库</td></tr><tr><td style="text-align:left;"><strong>information_schema.tables</strong></td><td style="text-align:left;">当前用户数据库的表</td></tr><tr><td style="text-align:left;"><strong>information_schema.columns</strong></td><td style="text-align:left;">当前用户数据库的列</td></tr><tr><td style="text-align:left;">sys.sql_logins</td><td style="text-align:left;">SQL Server 中所有的登录名</td></tr><tr><td style="text-align:left;">sys.all_columns</td><td style="text-align:left;">用户定义和系统对象的所有列的联合</td></tr><tr><td style="text-align:left;">sys.database_principals</td><td style="text-align:left;">数据库中每个权限或列异常权限</td></tr><tr><td style="text-align:left;">sys.database_files</td><td style="text-align:left;">存储在数据库中数据库文件</td></tr></tbody></table><h3 id="服务器角色" tabindex="-1"><a class="header-anchor" href="#服务器角色" aria-hidden="true">#</a> 服务器角色</h3><table><thead><tr><th style="text-align:left;">固定服务器角色</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>sysadmin(最高服务器角色)</strong></td><td style="text-align:left;"><strong>执行SQL Server中的任何动作</strong></td></tr><tr><td style="text-align:left;">serveradmin</td><td style="text-align:left;">配置服务器设置</td></tr><tr><td style="text-align:left;">setupadmin</td><td style="text-align:left;">安装复制和管理扩展过程</td></tr><tr><td style="text-align:left;">securityadmin</td><td style="text-align:left;">管理登陆和CREATE DATABASE的权限以及阅读审计</td></tr><tr><td style="text-align:left;">processadmin</td><td style="text-align:left;">管理SQL Server进程</td></tr><tr><td style="text-align:left;">dbcreator</td><td style="text-align:left;">管理和修改数据库</td></tr><tr><td style="text-align:left;">diskadmin</td><td style="text-align:left;">管理磁盘文件</td></tr></tbody></table><p>判断是否是最高服务器角色：</p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token operator">and</span> <span class="token number">1</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">select</span> is_srvrolemember<span class="token punctuation">(</span><span class="token string">&#39;sysadmin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">--+</span>
</code></pre></div><h3 id="数据库角色" tabindex="-1"><a class="header-anchor" href="#数据库角色" aria-hidden="true">#</a> 数据库角色</h3><table><thead><tr><th style="text-align:left;">固定数据库角色</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>db_owner(最高数据库角色)</strong></td><td style="text-align:left;">可以执行数据库中技术所有动作的用户</td></tr><tr><td style="text-align:left;">db_accessadmin</td><td style="text-align:left;">可以添加、删除用户的用户</td></tr><tr><td style="text-align:left;">db_datareader</td><td style="text-align:left;">可以查看所有数据库中用户表内数据的用户</td></tr><tr><td style="text-align:left;">db_datawriter</td><td style="text-align:left;">可以添加、修改或删除所有数据库中用户表内数据的用户</td></tr><tr><td style="text-align:left;">db_ddladmin</td><td style="text-align:left;">可以再数据库中执行所有DDL操作的用户</td></tr><tr><td style="text-align:left;">db_securityadmin</td><td style="text-align:left;">可以管理数据库中与安全权限有关所有动作的用户</td></tr><tr><td style="text-align:left;">db_backoperator</td><td style="text-align:left;">可以备份数据库的用户</td></tr><tr><td style="text-align:left;">db_denydatareader</td><td style="text-align:left;">不能看到数据库中任何数据的用户</td></tr><tr><td style="text-align:left;">db_denydatawriter</td><td style="text-align:left;">不能改变数据库中任何数据的用户</td></tr></tbody></table><p>判断是否是最高数据库角色：</p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token operator">and</span> <span class="token number">1</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">select</span> is_member<span class="token punctuation">(</span><span class="token string">&#39;db_owner&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">--+</span>
</code></pre></div>`,13),d=[n];function r(i,o){return e(),l("div",null,d)}const g=t(s,[["render",r],["__file","MsSQL.html.vue"]]);export{g as default};
