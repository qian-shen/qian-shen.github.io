import{_ as e,p as n,q as l,Z as s,s as a}from"./framework-47a2e622.js";const t={},p=s(`<h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> 安装</h2><p>在 Ubuntu/Debian 中安装：</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token parameter variable">-y</span> <span class="token function">install</span> nmap
</code></pre></div><p>在 /RHEL 中安装：</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>yum <span class="token parameter variable">-y</span> <span class="token function">install</span> nmap
</code></pre></div><p>在 Arch 中安装：</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>pacman <span class="token parameter variable">-S</span> nmap
</code></pre></div><h2 id="用途" tabindex="-1"><a class="header-anchor" href="#用途" aria-hidden="true">#</a> 用途</h2><ul><li>查看存活主机。</li><li>扫描目标主机开放端口。</li><li>鉴定安全过滤机制。</li><li>识别目标主机的操作系统。</li><li>查看目标主机服务的版本信息。</li><li>利用脚本扫描漏洞。</li></ul><h2 id="功能" tabindex="-1"><a class="header-anchor" href="#功能" aria-hidden="true">#</a> 功能</h2><ul><li>目标说明。</li><li>主机发现。</li><li>端口扫描。</li><li>端口说明和扫描顺序。</li><li>服务与版本探测。</li><li>脚本扫描。</li><li>操作系统探测。</li><li>时间和性能。</li><li>防火墙/IDS规避和欺骗。</li><li>输出选项。</li></ul><h2 id="常用命令" tabindex="-1"><a class="header-anchor" href="#常用命令" aria-hidden="true">#</a> 常用命令</h2><h3 id="目标说明" tabindex="-1"><a class="header-anchor" href="#目标说明" aria-hidden="true">#</a> 目标说明</h3><ul><li>从主机地址列表文件中导入扫描地址</li></ul><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>nmap <span class="token parameter variable">-iL</span> /root/ip.txt
</code></pre></div><ul><li>随机选项目标进行扫描，num hosts 表示数目，设置为0则无休止扫描</li></ul><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>nmap <span class="token parameter variable">-iR</span> <span class="token number">2</span>
</code></pre></div><ul><li>排除某个主机地址</li></ul><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>nmap <span class="token number">192.168</span>.1.1 <span class="token number">192.168</span>.1.2 <span class="token parameter variable">--exclude</span> <span class="token number">192.168</span>.1.2
</code></pre></div><ul><li>排除主机地址列表文件中的地址</li></ul><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>nmap <span class="token number">192.168</span>.1.0/24 <span class="token parameter variable">--excludefile</span> <span class="token number">192.168</span>.10-20
</code></pre></div><h3 id="主机发现" tabindex="-1"><a class="header-anchor" href="#主机发现" aria-hidden="true">#</a> 主机发现</h3><ul><li>列表扫描，仅将指定的目标 IP 列举出来，不进行主机发现</li></ul><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>nmap <span class="token parameter variable">-sL</span> <span class="token number">192.168</span>.1.0/24
</code></pre></div><ul><li>只利用 ping 扫描进行主机发现，不扫描目标主机的端口</li></ul><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>nmap <span class="token parameter variable">-sn</span> <span class="token number">192.168</span>.1.1
<span class="token comment"># 或者</span>
nmap <span class="token parameter variable">-sP</span> <span class="token number">192.168</span>.1.1
</code></pre></div><ul><li>将所有指定的主机视为已开启状态，跳过主机发现过程，不进行 ping 扫描</li></ul><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>nmap <span class="token parameter variable">-Pn</span> <span class="token number">192.168</span>.1.1
</code></pre></div><h3 id="端口扫描" tabindex="-1"><a class="header-anchor" href="#端口扫描" aria-hidden="true">#</a> 端口扫描</h3><p>nmap 将目标端口分为6种状态：</p><table><thead><tr><th style="text-align:center;">状态</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td style="text-align:center;">open</td><td style="text-align:center;">开放的</td></tr><tr><td style="text-align:center;">closed</td><td style="text-align:center;">关闭的</td></tr><tr><td style="text-align:center;">filtered</td><td style="text-align:center;">被过滤的</td></tr><tr><td style="text-align:center;">unfiltered</td><td style="text-align:center;">未被过滤：可访问但不确定开放情况</td></tr><tr><td style="text-align:center;">open | filtered</td><td style="text-align:center;">开放或被过滤</td></tr><tr><td style="text-align:center;">closed | filtered</td><td style="text-align:center;">关闭或者被过滤</td></tr></tbody></table>`,31),r=a("div",{class:"custom-container warning"},[a("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},[a("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("circle",{cx:"12",cy:"12",r:"9"}),a("path",{d:"M12 8v4"}),a("path",{d:"M12 16h.01"})])]),a("p",{class:"custom-container-title"},"nmap")],-1),i=s(`<h3 id="其他扫描" tabindex="-1"><a class="header-anchor" href="#其他扫描" aria-hidden="true">#</a> 其他扫描</h3><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token parameter variable">-sS</span> TCP SYN 扫描，半开放扫描，速度快隐蔽性好（不完成 TCP 连接），能够明确区分端口状态。
<span class="token parameter variable">-sT</span> TCP 连接扫描，TCP 扫描的默认模式，容易产生记录，效率低。
<span class="token parameter variable">-sA</span> TCP ACK 扫描，只设置 ACK 标志位，区别被过滤与未被过滤的。
<span class="token parameter variable">-sU</span> UDP 服务扫描，例如 DNS/DHCP 等，效率低
<span class="token parameter variable">-sO</span> 获取服务器支持哪些协议。
</code></pre></div><h3 id="服务扫描" tabindex="-1"><a class="header-anchor" href="#服务扫描" aria-hidden="true">#</a> 服务扫描</h3><p>nmap-services 包含大量服务的数据库，nmap 通过查询该数据库可以报告哪些端口可能对应于什么服务，但不一定正确。</p><p>进行服务版本探测：</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>nmap <span class="token parameter variable">-sV</span> <span class="token number">192.168</span>.10.1
</code></pre></div><p>设置版本扫描强度，范围0-9，默认7，强度越高，时间越长，服务越可能被正确识别。</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>nmap --version-intensite
</code></pre></div><h3 id="脚本扫描" tabindex="-1"><a class="header-anchor" href="#脚本扫描" aria-hidden="true">#</a> 脚本扫描</h3><p>允许用户自己编写脚本来执行自动化的操作或者扩展 nmap 的功能，使用 lua 脚本语言。</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token parameter variable">-sC</span> 使用默认类别的脚本进行扫描。
<span class="token parameter variable">--script</span><span class="token operator">=</span><span class="token operator">&lt;</span>Lua script<span class="token operator">&gt;</span> 使用某个或某类脚本进行扫描，支持通配符描述。
</code></pre></div><h3 id="系统扫描" tabindex="-1"><a class="header-anchor" href="#系统扫描" aria-hidden="true">#</a> 系统扫描</h3><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token parameter variable">-O</span> 启动操作系统探测。
<span class="token parameter variable">-A</span> 同时启用操作系统探测和服务版本探测。
--osscan-limit 针对指定的目标进行参照系统检测。
--osscan-guess 当 nmap 无法确定所检测的操作系统时，会尽可能地提供最相近的匹配。
</code></pre></div><h3 id="时间性能" tabindex="-1"><a class="header-anchor" href="#时间性能" aria-hidden="true">#</a> 时间性能</h3><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token parameter variable">-T</span> 设置时间模板级数，在0-5种选择。
T0 和 T1：用于 IDS 规避。
T2：降低了扫描速度以使用最少的带宽和资源
T3：默认为 T3，未做任何优化。
T4：假设具有合适及可靠的网络从而加速扫描。
T5：假设具有特别快的网络或者愿为速度牺牲准确性。
-host-timeout<span class="token operator">&lt;</span>time<span class="token operator">&gt;</span> 放弃低速目标之际，时间单位为毫秒。
</code></pre></div><h2 id="常用扫描" tabindex="-1"><a class="header-anchor" href="#常用扫描" aria-hidden="true">#</a> 常用扫描</h2><ul><li>扫描单一目标主机</li></ul><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>nmap <span class="token number">192.168</span>.0.1
nmap baidu.com
<span class="token comment"># 默认发送一个 ARP 的 ping 包，扫描1-10000范围内开放端口。</span>
</code></pre></div><ul><li>扫描整个子网</li></ul><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>namp <span class="token number">192.168</span>.0.1/24
</code></pre></div><ul><li>扫描多个目标</li></ul><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>nmap <span class="token number">192.168</span>.0.1 baidu.com
</code></pre></div><ul><li>扫描一个范围内的目标</li></ul><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>nmap <span class="token number">192.168</span>.0.1-100
nmap -p- <span class="token number">192.168</span>.1.1 <span class="token comment"># -p- 表示扫描所有端口，即 1-65535。</span>
</code></pre></div><ul><li>导入IP列表进行扫描</li></ul><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>nmap <span class="token parameter variable">-iL</span> ip.txt
</code></pre></div><ul><li>列举目标地址，但不进行扫描</li></ul><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>nmap <span class="token parameter variable">-sL</span> <span class="token number">192.168</span>.10./24
</code></pre></div><ul><li>排除某IP进行扫描</li></ul><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>nmap <span class="token number">192.168</span>.0.1/24 <span class="token parameter variable">-exclude</span> <span class="token number">192.168</span>.0.1
nmap <span class="token number">192.168</span>.0.1/24 <span class="token parameter variable">-exclude</span> <span class="token function">file</span> ip.txt
</code></pre></div><ul><li>扫描特定主机的特定端口</li></ul><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>nmap -p80,21,8080,135 <span class="token number">192.168</span>.0.1
nmap -p50-900 <span class="token number">192.168</span>.10.1
</code></pre></div><ul><li>简单扫描，详细输出返回结果</li></ul><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>nmap <span class="token parameter variable">-vv</span> <span class="token number">192.168</span>.10.1
</code></pre></div><ul><li>简单扫描并进行路由跟踪</li></ul><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>nmap <span class="token parameter variable">-traceroute</span> biadu.com
</code></pre></div><ul><li>ping 扫描，不扫描端口（需要 root 权限）</li></ul><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>nmap <span class="token parameter variable">-sP</span> <span class="token number">192.168</span>.10.1
nmap <span class="token parameter variable">-sn</span> <span class="token number">192.168</span>.10.1
</code></pre></div><ul><li>探测操作系统类型</li></ul><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>nmap <span class="token parameter variable">-O</span> <span class="token number">192.168</span>.10.1
</code></pre></div><ul><li>nmap 万能开关 -A 参数</li></ul><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>nmap <span class="token parameter variable">-A</span> <span class="token number">192.168</span>.10.1 <span class="token comment"># -A ：包含 1-10000 端口的 ping 扫描，操作系统扫描，脚本扫描，路由扫描，服务扫描。</span>
</code></pre></div><ul><li>混合命令扫描</li></ul><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>nmap <span class="token parameter variable">-vv</span> -p1-1000 <span class="token parameter variable">-O</span> <span class="token number">192.168</span>.10.1/24 <span class="token parameter variable">-exclude</span> <span class="token number">192.168</span>.0.1
</code></pre></div><ul><li>使用 TCP SYN 端口扫描</li></ul><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>nmap <span class="token parameter variable">-sS</span> <span class="token number">192.168</span>.10.1
</code></pre></div><ul><li>扫描UDP服务端口</li></ul><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>nmap <span class="token parameter variable">-sU</span> <span class="token number">192.168</span>.10.1
</code></pre></div><ul><li>TCP连接扫描端口</li></ul><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>nmap <span class="token parameter variable">-sT</span> <span class="token number">192.168</span>.10.1
</code></pre></div><ul><li>由于IDS/IPS系统的存在，防火墙可能会阻断掉 SYN 数据包，此时可发送设置了 FIN 标准的数据包，不需要完成 TCP 握手，不会再目标产生日志</li></ul><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>nmap <span class="token parameter variable">-sF</span> baidu.com
</code></pre></div><ul><li>服务版本探测</li></ul><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>nmap <span class="token parameter variable">-sV</span> <span class="token number">192.168</span>.10.1
</code></pre></div><h2 id="常用组合" tabindex="-1"><a class="header-anchor" href="#常用组合" aria-hidden="true">#</a> 常用组合</h2><blockquote><p>获取远程主机的系统类型及开放端口</p></blockquote><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>nmap <span class="token parameter variable">-sS</span> <span class="token parameter variable">-PO</span> <span class="token parameter variable">-sV</span> <span class="token parameter variable">-O</span> <span class="token number">192.168</span>.0.110
nmap <span class="token parameter variable">-sS</span> <span class="token parameter variable">-P0</span> <span class="token parameter variable">-A</span> <span class="token parameter variable">-v</span> <span class="token number">192.168</span>.0.0/24
</code></pre></div><ul><li>-sS：TCP-SYN 扫描。</li><li>-PO：IP 协议 ping。</li><li>-sV：服务版本探测。</li><li>-O：操作系统探测。</li><li>-v：显示详细信息。</li></ul><blockquote><p>大批量 IP 扫描</p></blockquote><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>nmap <span class="token parameter variable">-sS</span> <span class="token parameter variable">-Pn</span> <span class="token parameter variable">-n</span> <span class="token parameter variable">--open</span> --min-hostgroup <span class="token number">4</span> --min-parallelism <span class="token number">1024</span> --host-timeout <span class="token number">30</span> <span class="token parameter variable">-T4</span> <span class="token parameter variable">-v</span> <span class="token parameter variable">-oG</span> result.txt <span class="token parameter variable">-iL</span> ip.txt
</code></pre></div><ul><li>-open：只输出检测状态为 open 的端口，即开放的端口。</li><li>-min-hostgroup 4：调整并行扫描组的大小。</li><li>-min-parallelism 1024：调整探测报文的并行度。</li><li>-host-timeout 30：检测超时的跳过。</li><li>-oG：输出为比较人性化的格式，一条记录一行。</li><li>-iL 扫描文件中的所有⽬标地址，如 nmap -sS -iL ip.txt。</li></ul>`,61),c=[p,r,i];function d(o,u){return n(),l("div",null,c)}const b=e(t,[["render",d],["__file","nmap.html.vue"]]);export{b as default};
